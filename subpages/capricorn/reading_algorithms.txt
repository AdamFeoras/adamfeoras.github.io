if (((bookshelf.bible = true) or (player.florins < 5)) and ((bookshelf.lovers = true) or (player.florins < 10)) and ((bookshelf.legend = true) or (player.florins < 10)) and ((bookshelf.black_death = true) or (player.florins < 10)) and ((bookshelf.dante = true) or (player.florins < 10)) and ((bookshelf.aesop = true) or (player.florins < 10)) and ((bookshelf.travel = true) or (player.florins < 10)) and ((bookshelf.marco_polo = true) or (player.florins < 10)) and ((bookshelf.plato = true) or (player.florins < 20)) and ((bookshelf.hunting = true) or (player.florins < 50)) and ((bookshelf.plants = true) or (player.florins < 50)) and ((bookshelf.witch_hunt = true) or (player.florins < 100)) and ((bookshelf.greek = true) or (player.florins < 100)) and ((bookshelf.latin = true) or (player.florins < 100)) and ((bookshelf.first_aid = true) or (player.florins < 200))){
	msg ("As always, you enjoy walking through the bookstore, smelling the refined mustiness of the paper, thumbing through new acquisitions, trading thoughts and good-natured zings with Rinaldo, but none of the current offerings strike you as something you need on your shelf, though.")
}
else{
	menulist = NewStringList()
	if ((bookshelf.bible = false) and (player.florins > 4)){
		list add (menulist, "La Sacra Bibbia")
	}
	if ((bookshelf.lovers = false) and (player.florins > 9)){
		list add (menulist, "Historia de Duobus Amantibus")
	}
	if ((bookshelf.legend = false) and (player.florins > 9)){
		list add (menulist, "Legenda Aurea")
	}
	if ((bookshelf.black_death = false) and (player.florins > 9)){
		list add (menulist, "Decameron")
	}
	if ((bookshelf.dante = false) and (player.florins > 9)){
		list add (menulist, "Divina Commedia")
	}
	if ((bookshelf.aesop = false) and (player.florins > 9)){
		list add (menulist, "Aesopus Moralisatus")
	}
	if ((bookshelf.travel = false) and (player.florins > 9)){
		list add (menulist, "Peregrinatio in Terram Sanctam")
	}
	if ((bookshelf.marco_polo = false) and (player.florins > 9)){
		list add (menulist, "Il Milione")
	}
	if ((bookshelf.plato = false) and (player.florins > 19)){
		list add (menulist, "Opera Platonis")
	}
	if ((bookshelf.hunting = false) and (player.florins > 49)){
		list add (menulist, "Il Maestro della Caccia")
	}
	if ((bookshelf.plants = false) and (player.florins > 49)){
		list add (menulist, "Herbarium Apuleii Platonici")
	}
	if ((bookshelf.witch_hunt = false) and (player.florins > 99)){
		list add (menulist, "Malleus Maleficarum")
	}
	if ((bookshelf.greek = false) and (player.florins > 99)){
		list add (menulist, "Parlando Greco")
	}
	if ((bookshelf.latin = false) and (player.florins > 99)){
		list add (menulist, "Il Linguaggio Romano")
	}
	if ((bookshelf.first_aid = false) and (player.florins > 199)){
		list add (menulist, "Rosa Medicinæ")
	}
	ShowMenu ("These are the books available to you:", menulist, true) {
	
	
		if (result = "La Sacra Bibbia") {
			msg ("A beautiful, leatherbound Bible on the shelf catches your eye. The decorative stitchwork on the cover is lovely, the placemark is silk, and some of the pages are even illuminated. You feel a pang of sadness. You buried the family Bible with Pipa. It was one of those things that you were on the fence on. You still half regret it, but it felt strangely wrong for her to be without it. You bring the Bible to Rinaldo. \"<i>Bello</i>. What are you asking?\"")
			Ask ("Rinaldo looks down at your find and smiling, goes back to his work. \"For you, <i>amico mio</i>, 5 florins.\""){
				if (result){
					msg ("You cock your head. \"<i>5?</i> 5 only?\"")
					msg ("\"<i>Sì</i>.\"")
					msg ("\"Why so little?\" you ask as you fish Rinaldo's payment out of your coinpurse.")
					msg ("\"I want you to have it,\" Rinaldo says as he pockets the coins.")
					bookshelf.bible = true
					player.florins = player.florins - 5
				}
				else{
					msg ("You mull it over. \"You're very kind,\" you say as you turn to put it back, \"But I'm not ready yet.\"")
				}
			}
		}
		
		
		else if (result = "Historia de Duobus Amantibus") {
			msg ("Three copies of the story of two lovers are lined up near the front of the store. You always meant to get around to reading this one. You slide one of them out. \"Rinaldo,\" you say, just loud enough for him to hear, and hold up the book. \"How much for the pope's porno?\"")
			Ask ("He doesn't bother looking up from his book. \"10 florins. <i>Uomo d'onore</i>.\""){
				if (result){
					msg ("You walk over and put the payment on the counter. You think of firing off another smartass comment but let it go.")
					bookshelf.lovers = true
					player.florins = player.florins - 10
				}
				else{
					msg ("You decide against it. How good could erotica written by a priest possibly be?")
				}
			}
		}
		
		
		else if (result = "Legenda Aurea") {
			msg ("You're glossing over the new arrivals when you come to one titled <i>Legenda Aurea</i>. You turn it over in your hands, take it to Rinaldo. \"What's this?\"")
			Ask ("He glances up. \"Anthology of stories. Good one, too. Popular up north. Yours for 10 florins.\" You hum suspiciously. \"A saint fights a dragon,\" he adds."){
				if (result){
					msg ("\"Sold,\" you say immediately, handing over Rinaldo's money. \"A dragonslayer, eh? <i>Che un santo.</i>\"")
					bookshelf.legend = true
					player.florins = player.florins - 10
				}
				else{
					msg ("\"Kind of sounds like a kid wrote it,\" you joke. Rinaldo shrugs as you reshelve the book.")
				}
			}
		}
		
		
		else if (result = "Decameron") {
			msg ("You pull a big, black copy of <i>Decameron</i> off the shelf. \"I hate to admit it,\" you say to the bookworm over your shoulder, \"But I've never read <i>Decameron</i>.\"")
			Ask ("\"No kidding. I'm surprised; that's the sort of anthology you would like. And that's the most attractive edition, the one you're holding. You can keep it for 10 florins.\""){
				if (result){
					msg ("\"<i>Bene</i>.\" You absent-mindedly give him a handful of florins, already poking through the first chapter as he takes his money.")
					bookshelf.black_death = true
					player.florins = player.florins - 10
				}
				else{
					msg ("\"Yeah, maybe I'll get into it some time,\" you say as you put the book back.")
				}
			}
		}
		
		
		else if (result = "Divina Commedia") {
			msg ("\"The divine comedy\", you read aloud. \"What's so divine about it?\"")
			msg ("\"Well for starters, the first chapter tells you all about where you're going.\"")
			msg ("You bite, thumbing the book to the first title page. <i>Inferno</i>. \"Smartass.\"")
			Ask ("\"I'm surprised you haven't read Dante. The mingling of theology with mythology is vogue these days. 10 florins if you want it.\""){
				if (result){
					msg ("\"Yeah, I should probably get around to it,\" you agree, giving Rinaldo a fistful of florins. \"Who knows? Maybe it'll scare me straight.\"")
					bookshelf.dante = true
					player.florins = player.florins - 10
				}
				else{
					msg ("\"That's okay. I have plenty of people telling me I'm going to hell as it is.\"")
				}
			}
		}
		
		
		else if (result = "Aesopus Moralisatus") {
			msg ("\"Ah,\" you say, easing a large collection off the shelf, \"Aesop. My mother used to read me his <i>favole</i>.\"")
			Ask ("Rinaldo is engrossed in his book. \"Well, I won't read them to you, but I will sell them to you for 10 florins.\""){
				if (result){
					msg ("\"Sure. Why not?\" Rinaldo only glances up for a second when you put his payment on his desk.")
					bookshelf.aesop = true
					player.florins = player.florins - 10
				}
				else{
					msg ("\"<i>No grazie</i>.\" You slide the book back. \"I think those days are behind me.\"")
				}
			}
		}
		
		
		else if (result = "Peregrinatio in Terram Sanctam") {
			msg ("You take a meaty book down and hold it up for Rinaldo. \"What's this?\"")
			msg ("Rinaldo looks up. \"That's a good one. An artist from up north took a trip to the holy land. That's the story of his journey you have there. A wonder of the printing press; take a look inside.\"")
			msg ("Thumbing through it, you're treated to dozens of meticulous woodcuts. \"<i>Bellissimo</i>.\"")
			Ask ("\"10 florins for it, if you're interested.\""){
				if (result){
					msg ("You consider the lovely illustrations. \"<i>Bene</i>,\" you agree, handing over Rinaldo's price as you continue to appreciate the artistry of the book.")
					bookshelf.travel = true
					player.florins = player.florins - 10
				}
				else{
					msg ("You look at the illustrations a bit longer before replacing the book. \"The holy land seems a bit intense for me.\"")
				}
			}
		}
		
		
		else if (result = "Il Milione") {
			msg ("\"Il Milione,\" you say as you slide said book off the shelf.")
			msg ("\"My favorite book in the store,\" says Rinaldo.")
			msg ("\"Your favorite?\"")
			Ask ("\"My favorite. The adventures of Marco Polo. Harrowing, heartbreaking, inspiring, fascinating. Not to belittle your accomplishments, <i>amico mio</i>, but he's the greatest merchant and traveller of all time. That's the best 10 florins you'll ever spend.\""){
				if (result){
					msg ("\"I'm looking forward to it. Here's your 10 florins.\"")
					msg ("\"Well spent,\" says Rinaldo. \"You'll never put it down.\"")
					bookshelf.marco_polo = true
					player.florins = player.florins - 10
				}
				else{
					msg ("\"Interesting,\" you muse. \"I'll pick it up some time.\"")
					msg ("Rinaldo shakes his head. \"I hope you change your mind soon, you'll be glad you did.\"")
				}
			}
		}
		
		
		else if (result = "Opera Platonis") {
			msg ("You ease the especially weighty volume containing Plato's complete works off the shelf. \"Founding western thought certainly was a verbose task, wasn't it?\" you groan.")
			Ask ("\"I find Plato interesting, intellectually speaking,\" says Rinaldo, \"But I have to discipline myself to concentrate.\" He sets aside his book, raises one eyebrow. \"It's 20 for the full works. You sure you want to tackle that?\""){
				if (result){
					msg ("\"Yeah, I never received an education in the classics,\" you admit as you count out Rinaldo's payment.")
					msg ("\"<i>Uomo d'onore, eh?</i>\" he quips as he stows the money.")
					msg ("\"Oh, my parents did well enough, but I've had to fill in a few blanks.\"")
					bookshelf.plato = true
					player.florins = player.florins - 20
				}
				else{
					msg ("\"Eh, maybe not.\" You reshelve the heavy book.")
				}
			}
		}
		
		
		else if (result = "Il Maestro della Caccia") {
			msg ("\"The Master of Game,\" you read aloud to Rinaldo.")
			msg ("\"It's interesting,\" Rinaldo explains, \"The author was an English king's huntsman. Two parts manual, one part autobiography. Do you hunt yourself?\"")
			msg ("\"A little.\"")
			msg ("\"Fair warning, this book will get in your head.\"")
			msg ("\"How much do you want for it?\"")
			msg ("\"It's a translation, a limited edition, and a collector's item. Honestly? I kind of want to keep it, but I'll part with it for 50 florins."\")
			msg ("\"Hmmm. I could use a little more convincing.\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19){
				player.charisma = player.charisma + 1
				rinaldo_discount = 50 - (skill_check(player.charisma) + 5)
				Ask ("Rinaldo thinks for a second as he reads on. \"I guess I could go down to " + rinaldo_discount + " florins.\""){
					if (result){
						msg ("\" " + rinaldo_discount + " florins,\" you agree, fishing Rinaldo's price out of your coinpurse.")
						bookshelf.hunting = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("\"Thanks for the offer, but I'm not really a collector.\" Rinaldo shrugs as you return the book.")
					}
				}
			}
			else{
				Ask ("Rinaldo breaks into a grin and goes back to his book. \"Well, I could use a beautiful woman and a bottle of <i>vino</i>, but here I am.\" You laugh. \"50 florins,\" he reiterates."){
					if (result){
						msg ("\"50 florins,\" you echo, reaching for your coinpurse.")
						bookshelf.hunting = true
						player.florins = player.florins - 50
					}
					else{
						msg ("\"I'll pass. Not much of a collector.\"")
					}
				}
			}
		}
		
		
		else if (result = "Herbarium Apuleii Platonici") {
			msg ("A tired-looking book catches your eye. Removing it from the shelf, you find a worn, canvas-like cover decorated with the illustration of a thistle. Chipped up as the book is, you can't help but love it. Something about it reminds you of Pipa. \"This is great,\" the pleasure in your voice catches Rinaldo off guard.")
			msg ("\"Herbalist's manual. Fine work of research, that one, and not easy to find. Not easy to re-bind, either.\"")
			msg ("\"I like this book. <i>Molto bella</i>. What are you asking?\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 15){
				player.charisma = player.charisma + 1
				rinaldo_discount = 50 - (skill_check(player.charisma) + 5)
				Ask ("Rinaldo hems and haws for a few moments. \"Well, I wasn't planning on letting that go for a song, but seeing how much you like it, I'll settle for " + rinaldo_discount + " florins.\""){
					if (result){
						msg ("\"Done. Definitely done.\" You hand over the coins.")
						msg ("Rinaldo half raises his payment. \"<i>Grazie</i>. Enjoy that.\"")
						bookshelf.plants = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("You gaze longingly at the book. \"Thanks for the offer, maybe later.\"")
						msg ("\"<i>Come vuoi.</i>\"")
					}
				}
			}
			else{
				Ask ("Rinaldo thinks for a second. \"As hard as that was to restore, I wouldn't take less than 50 florins.\""){
					if (result){
						msg ("\"50 then.\" You take two fistfuls of florins onto his desk and count each one out. \"There you are.\"")
						msg ("\"<i>Grazie</i>, Domenico.")
						bookshelf.plants = true
						player.florins = player.florins - 50
					}
					else{
						msg ("\"I love it, to be sure. But not this time.\"")
						msg ("\"<i>Certo, amico mio.\" Let me know if you change your mind.")
					}
				}
			}
		}
		
		
		else if (result = "Malleus Maleficarum") {
			msg ("A heavy, leatherbound book sits near the back of the store. Pulling it down and opening up, you are greeted by the heady scent of yellowing parchment and weathered leather. \"Malleus Maleficarum\", you read aloud.")
			msg ("\"They should all be destroyed.\"")
			msg ("\"<i>Cosa?</i>\"")
			msg ("\"The rantings of a demented German pervert. That work of the devil has gotten girls killed, murdered in unspeakable ways. Put it down.\"")
			msg ("\"<i>Bene</i>, but what is it?\"")
			msg ("\"Instructions for hunting and interrogating witches.\" He sighs and rubs his forehead. \"It's a first edition of a very controversial book, so I originally picked it up as a collector's item. Now I worry that people may interpret my ownership as endorsement.\"")
			msg ("You're quiet for a moment, contemplating the book. \"And for me to alleviate your cares would cost me...?\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 14){
				player.charisma = player.charisma + 1
				rinaldo_discount = 100 - ((2 * skill_check(player.charisma)) + 10)
				Ask ("Rinaldo doesn't say anything at first. \"Christ Himself teaches us that leading a child of God to sin is an act of the highest evil. I fear that passing this evil book on to you may itself be an act of evil, but I can't have it under my roof anymore and its scholarly value as an artifact won't allow me to destroy it.\" He loses himself in thought as you look on. \"You can have it for " + rinaldo_discount + " florins. That's a small fraction of what I paid for it.\""){
					if (result){
						msg ("\"Done,\" you agree as you count out " + rinaldo_discount + " florins into a bag he places on his desk.")
						msg ("Rinaldo looks at his hands. <span style='color:red;'>\"Ignosce mihi, Pater.\"</span>")
						msg ("\"..Rinaldo. It's just a book. I'm not going to do anything bad.\"")
						msg ("\"That book is a creation of Lucifer, <i>amico mio</i>. It was made to turn men to evil. No man is above the influence of the devil. And this,\" he says, holding up his payment, \"Is blood money. <i>Prezzo del sangue</i>. I'm taking this straight to the church.\"")
						bookshelf.witch_hunt = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("\"Thank you for the offer,\" you say as you shelve the book. \"And for the warning. Between the two, I'll take the latter.\"")
						msg ("Rinaldo nods. \"That's probably wise.\"")
					}
				}
			}
			else{
				Ask ("\"I paid 500 florins for that monstrosity. I'll allow you to rid me of it for 100.\""){
					if (result){
						msg ("\"Why the hefty discount?\" You pull out your coinpurse and get to making stacks of ten on Rinaldo's desk.")
						msg ("Rinaldo takes a small sack out of a drawer and sets it to the side until you're finished. \"Because I don't want a creation of Lucifer under my roof, regardless of its scholarly value.\"")
						msg ("This romantic statement from the typically prosaic Rinaldo unsettles you, leaving the two of you to finish your exchange in silence.")
						bookshelf.witch_hunt = true
						player.florins = player.florins - 100
					}
					else{
						msg ("\"Your words of wisdom reinforced with a 100 florin price of admission have touched my heart, Rinaldo.\" You expect to get a smile out of him, but his nose is back in his book.")
					}
				}
			}
		}
		
		
		else if (result = "Parlando Greco") {
			msg ("You put a hand on Rinaldo's desk. \"Do you have any books for learning Greek?\"")
			msg ("\"You want to learn Greek?\"")
			msg ("\"Nope, I want to look at the pictures.\"")
			msg ("\"Why?\"")
			msg ("\"I hear Greek illustrators are talented.\"")
			msg ("Rinaldo groans from his desk, crosses the room, and hands you a large text off the shelf. \"Speaking Greek. Here you go. 100 florins. Smartass.\"")
			msg ("You hiss. \"Can I get you to go down on that?\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19){
				player.charisma = player.charisma + 1
				rinaldo_discount = 100 - ((2 * skill_check(player.charisma)) + 10)
				Ask ("\"Sure,\" he concedes. \"I'll do " + rinaldo_discount + " florins. Maybe get you to buy Greek language books from me in the future.\""){
					if (result){
						msg ("\"I will, thanks.\" You set the book on Rinaldo's desk and count out his price on top of it.")
						msg ("\"<i>Grazie, Domenico. A presto.</i>\"")
						bookshelf.greek = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("\"Thanks for the discount, but on second thought, I'll have to think about it.\"")
						msg ("Rinaldo raises his eyebrows in surprise, then shrugs and puts the book back.")
					}
				}
			}
			else{
				Ask ("\"Oh, now the <i>uomo d'onore</i> has a polite request. <i>Mi dispiace</i>, Domenico, academic texts don't come cheap and 100 florins is a reasonable profit margin.\""){
					if (result){
						msg ("\"Alright then.\" You count out Rinaldo's coinage in tens.")
						msg ("\"<i>Buona fortuna</i>,\" he says, putting his payment in a small bag. \"This is not a small undertaking you have before you.\"")
						bookshelf.greek = true
						player.florins = player.florins - 100
					}
					else{
						msg ("\"<i>Capisco</i>. Fair enough. I might come back around for it.\"")
						msg ("Rinaldo shrugs and replaces the book.")
					}
				}
			}
		}
		
		
		else if (result = "Il Linguaggio Romano") {
			msg ("\"I don't suppose you have any Latin language courses available?\"")
			msg ("\"<i>Si certo</i>.\" Rinaldo rises from his desk. \"What's your interest, may I ask?\"")
			msg ("\"I never got a proper education. And there's no excuse for not speaking Latin.\"")
			msg ("\"<i>Vero</i>,\" he agrees, handing you a book off the shelf. \"The Roman Language. It'll take a while, but it's worth it.\"")
			msg ("\"What are you asking?\"")
			msg ("\"100 florins.\"")
			msg ("\"I don't suppose you'd swing a discount for a regular?\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19){
				player.charisma = player.charisma + 1
				rinaldo_discount = 100 - ((2 * skill_check(player.charisma)) + 10)
				Ask ("\"Oh....\" Rinaldo shrugs. \"<i>Bene</i>. " + rinaldo_discount + " florins for a regular.\""){
					if (result){
						msg ("\"<i>Grazie</i>. It's a deal.\" You count out the coins onto Rinaldo's desk.")
						msg ("\"<i>Buona fortuna, amico mio</i>. That's quite an investment of time you have on your hands. Don't give up. I'll meet you at Matteo's if you want to practice.\"")
						msg ("\"I may take you up on that. <i>A presto</i>, Rinaldo.\"")
						bookshelf.latin = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("\"Thank you for the discount,\" you say. \"But I think I underestimated the investment.\"")
						msg ("Rinaldo shrugs and replaces the book. \"Well, you know where to find it if you change your mind.\"")
					}
				}
			}
			else{
				Ask ("\"This is an academic textbook. <i>Mi dispiace</i>, Domenico. Not this time. Still 100, even for my deeply appreciated regular.\""){
					if (result){
						msg ("\"<i>Capisco. Molto bene.</i> I'll do 100.\" You count out the stacks of ten, which Rinaldo swipes into a canvas bag and tucks away in his desk drawer.")
						msg ("\"Let me know if you want to practice.\"")
						msg ("\"I will. <i>A presto</i>, Rinaldo.\"")
						bookshelf.latin = true
						player.florins = player.florins - 100
					}
					else{
						msg ("\"I see. I'll pass for now.\"")
						msg ("\"<i>Va bene</i>. Let me know if you change your mind.\"")
					}
				}
			}
		}
		
		
		else if (result = "Rosa Medicinæ") {
			msg ("While browsing the shelves, you come across a thick manual with a few books stacked on it, <i>Rosa Medicinæ</i>. Mulling it over, you think back to your career on the sea, all of those injuries, both others' and your own. You look down at your own scars and realize that, if you're wading back into the fray, it might be a good idea to study the basics of medicine.")
			msg ("Heaving the book into your arms, you ease it onto Rinaldo's desk with a thud. \"<i>Porca vacca!</i>\" he barks, snapped out of his reverie. \"Domenico. You're studying medicine? That's a new one.\"")
			msg ("\"I can't help that people like to poke holes in me. How much will this set me back?\"")
			msg ("\"200 florins.\"")
			msg ("You recoil a bit. \"200?\"")
			msg ("\"200.\"")
			msg ("\"That's more than I expected. That's the best you can do for me?\"")
			if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19){
				player.charisma = player.charisma + 1
				rinaldo_discount = 200 - ((5 * skill_check(player.charisma)) + 10)
				Ask ("Rinaldo scratches his jaw. \"I paid a fortune for it, but it's been sitting on the shelf for a long time.\" He sighs. \"To get it out the door, I could go as low as " + rinaldo_discount + ".\""){
					if (result){
						msg ("\"Deal,\" you agree, pushing your coinpurse to him. He counts out the florins, then nods. \"<i>A presto</i>, Domenico. Get that leviathan out of my store.\"")
						bookshelf.first_aid = true
						player.florins = player.florins - rinaldo_discount
					}
					else{
						msg ("\"Thanks for the offer,\" you say. \"But I'll pass.\" He shrugs as you return the textbook to the shelf.")
					}
				}
			}
			else{
				Ask ("\"<i>Mi dispiace</i>, Domenico. Medical textbooks cost a fortune. 200 is the best I can do.\""){
					if (result){
						msg ("You drum your fingers on the counter, then fish the full 200 florins out of your coinpurse. \"<i>Grazie</i>, Domenico. I'll see you soon.\"")
						bookshelf.first_aid = true
						player.florins = player.florins - 200
					}
					else{
						msg ("\"You hang onto it for now,\" you tell Rinaldo, \"I need to go sell my house first.\" He rolls his eyes as you return the textbook to the shelf.")
					}
				}
			}
		}
		
		else{
			msg ("<i><b>Beta Tester:</b> if you get this message, let me know.</i>")
		}
		
		
	}
}
if (player.parent.beach=false) {
  msg ("There are no shallows here for you to dive in.")
}
else if (player.time_of_day > 20) {
  msg ("Diving at night is dangerous. Diving in any obscured condition is dangerous.")
}
else if (not Got(dagger)) {
  msg ("You shouldn't dive without your dagger.")
}
else if (player.bloodied=true) {
  msg ("You shouldn't dive when you're bloodied up.")
}
else {
  player.harvesting = true
  player.time_of_day = player.time_of_day + 1
  msg ("You strip down to your underwear and neatly fold your clothes on a nearby rock. You wade into the shallows, then dive into the surf when the ledge gives way to water deep enough to dive in.")
  intro_message = DiceRoll("1d6")
  if (intro_message = 1) {
    msg ("You're having a good time, launching yourself around the shallows, vaulting off the bottom, kicking off rocks; the sea is lovely today and your spirits are high.")
  }
  else if (intro_message = 2) {
    msg ("You're having a good time, launching yourself around the shallows, vaulting off the bottom, kicking off rocks; the sea is lovely today and your spirits are high.")
  }
  else if (intro_message = 3) {
    msg ("Resting for a minute, you drift facedown with the tide. Surveying the ocean floor below you like a distant landscape, you catch yourself entertaining the fantasy of being a bird.")
  }
  else if (intro_message = 4) {
    msg ("Resting for a minute, you drift facedown with the tide. Surveying the ocean floor below you like a distant landscape, you catch yourself entertaining the fantasy of being a bird.")
  }
  else if (intro_message = 5) {
    msg ("The shallows are deathly quiet. It's kind of nice; your life feels more compartmentalized down here, but you also feel more isolated. You find yourself thinking of Pipa.")
  }
  else {
    msg ("The shallows are deathly quiet. It's kind of nice; your life feels more compartmentalized down here, but you also feel more isolated. You find yourself thinking of Pipa.")
  }
  disposition = "friendly"
  nature = "mundane"
  if (RandomChance(50)) {
    if (RandomChance(10)) {
      disposition = "hostile"
    }
    if (RandomChance(10)) {
      nature = "mythical"
    }
    if ((disposition = "friendly") and (nature = "mundane")) {
      friendly_mundane = DiceRoll("1d10")
      if (friendly_mundane > 5) {
        msg ("dolphin encounter")
      }
      else if (friendly_mundane > 2) {
        msg ("As you're examining a patch of wakame with the possibility of a salad in mind, you spot a loggerhead turtle keeping a low profile several rocks away. You don't see these animals often. ")
        if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19) {
          msg ("Before paddling over, you take a big, sticky clump of wakame with you. The turtle backs up into an outcropping, kind of withdrawing its head a bit. But when you hold out the sweet wakame leaves, she spends a couple of minutes eating out of your hand. You go up for air, back for more wakame, and back to the turtle. This time, after you feed her, she kind of climbs in your lap and lets you hold her for a few minutes before you return to foraging.")
          player.saltiness = player.saltiness + 1
        }
        else {
          msg ("You slowly approach, hoping to make nice, but the turtle hits the deck, sidling under an outcropping and staring your down.")
        }
      }
      else {
        msg ("While diving in a particularly deep part of the shallows, you notice a strange pair of hircinous eyes watching you from a copse of coral. ")
        if ((DiceRoll("1d20") + skill_check(player.charisma)) > 19) {
          msg ("The octopus watches impassively as you come over and offer out a still struggling crab. It hesitates for a second, then one arm shoots out and stuffs the offering into its nebulous center. After a minute of watching it, it spits out the shell. The octopus eases out of its cave to check you out; it investigates your hair and hands with its tentacles which amuses you, but also kinda creeps you out. You back to searching for food, and it shadows you for a few minutes before heading back to the safety of its lair.")
          player.saltiness = player.saltiness + 1
        }
        else {
          msg ("Swimming over to investigate, you scare up the octopus, which takes off, leaving you in a noxious cloud of ink. Whatever. Octopus is an acquired taste anyway.")
        }
      }
    }
    else if ((disposition = "friendly") and (nature = "mythical")) {
      msg ("As you poke through the coral, hoping to scare a lobster out of its hiding place, you get the feeling of being watched. You scan the dim blue expanse beyond the shallows, back and forth a couple of times, but you don't see anything.")
    }
    else {
      if (RandomChance(50)) {
        shark_type = DiceRoll("1d40")
        if (shark_type = 1) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            msg ("You're enjoying the solitude of the shallows as a school of neon blue tangs glide past you. Suddenly, the fish scatter and you the pressure of the water around you seems to intensify slightly. Creeped out, you turn and scream a bouquet of bubbles at an unreasonably large shark swimming fairly close to you.")
            player.wisdom = player.wisdom + 1
            if (DiceRoll("1d4") > 1) {
              msg ("The great white swims off, and then shatters your relief by returning, again sizing you up from  a slight distance. It repeats this behavior a few times before vanishing for good.")
            }
            else {
              player.harvesting = false
              msg ("It comes in close, so close that it bumps you as it works itself back and forth. You know you should jab at it with your dagger, but your body won't respond; you're in lockdown mode. Real fear of death paralyzes you as the great white turns and barrels at you with unmistakable intent.")
              white_shark_attack
            }
          }
          else {
            msg ("You're enjoying the solitude of the shallows as a school of neon blue tangs glide past you. ")
            if (DiceRoll("1d4") > 2) {
              msg ("Suddenly, the fish scatter and you are tossed in the wake of something very large. Your butt cheeks come together hard enough to crack a walnut when you see a huge shark with a brilliant white belly swimming away from you. You're shaking and you could dance to the beat of your own heart, but the shark certainly seems like it's decided it isn't interested in you – but you are terrified to realize that it was seriously considering it at one point.")
            }
            else {
              player.harvesting = false
              player.hit_points = player.hit_points - 9
              if (player.hit_points < 1) {
                player.hit_points = 1
              }
              msg ("Suddenly, the fish scatter. A moment later your world explodes as you are launched out of the water. You crash back into the water and pain comes from both sides as you are violently shaken back and forth. Finally, you are momentarily released, too shocked to be as scared as you probably should be when you see your attacker, a massive shark with a brilliant white belly. A great white.")
              white_shark_attack
            }
          }
        }
        else if (shark_type = 2) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            msg ("You're feverishly trying to fish a flustered crab out from underneath a narrow space under a rock when you become aware of something large entering your space. You look up and almost drop your dagger. With its long, spangled body and broad, geometric snout, there's no mistaking a tiger shark.")
            player.wisdom = player.wisdom + 1
            if (DiceRoll("1d3") > 1) {
              msg ("True to form, the tiger shark approaches repeatedly, coming a little closer and faster each time, testing your limits. You back up against a rock face, and as soon as it makes the mistake of coming within arm's reach, you bury your dagger in the side of its face. With a flick of its tale that clouts you hard enough to have you seeing stars, the tiger shark flees for deeper water – which is doubly good, seeing as you've dropped your dagger to the ocean floor and have to bother with retrieving it.")
            }
            else {
              player.harvesting = false
              msg ("True to form, the tiger shark approaches repeatedly, coming a little closer and faster each time, testing your limits, and your dagger might as well be a butter knife for all the good it's doing. You even try to swim under a rocky outcropping in an attempt to fend it off. To the aforementioned crab's delight, the shark won't be dissuaded.")
              tiger_shark_attack
            }
          }
          else {
            if (DiceRoll("1d3") > 2) {
              msg ("You're feverishly trying to fish a flustered crab out from underneath a narrow space under a rock, working your knife in and out of the crevice, as the tasty arthropod gets angrier and angrier. You're utterly absorbed in what you're doing, so much so that you aren't aware you're not alone until something big and rough brushes up against your back. You yelp, kicking and thrashing out at the offending animal. When the silt and bubbles clear, you can make out the stipes of a tiger shark putting you behind him. As soon as you're sure he's gone, you glance back under the rock to discover the crab capitalized on the episode and escaped.")
            }
            else {
              player.harvesting = false
              player.hit_points = player.hit_points - 6
              if (player.hit_points < 1) {
                player.hit_points = 1
              }
              msg ("You're feverishly trying to fish a flustered crab out from underneath a narrow space under a rock when you're lifted away from ocean floor, shearing pressure digging into your side. One glance at the telltale spangling of your attacker tells you you're in the grip of a tiger shark.")
              tiger_shark_attack
            }
          }
        }
        else if (shark_type = 3) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            msg ("Preoccupied as you are with finding oceanic critters to convert into a scrumptious seafood dinner, it would be hard to miss the bulky shadow of an approaching bull shark. The shark lunges from about ten meters away, then banks off and approaches from another direction. It wants you, for sure.")
            player.wisdom = player.wisdom + 1
            if (DiceRoll("1d3") > 1) {
              msg ("Finally the shark banks close enough for you to demonstrate how your dagger works. You give it a good stab right below the dorsal fin; not a life-threatening blow, but definitely enough to expedite the shark from your personal space. You watch it disappear into the murky blue fifty yards off before continuing to look for food.")
            }
            else {
              player.harvesting = false
              msg ("You thrust out with your dagger, but this is a hungry shark. You brace yourself for a nasty fight as it throws its muscular frame and mouthful of teeth your way.")
              bull_shark_attack
            }
          }
          else {
            msg ("You prod the silty sea floor with your dagger, trying to uncover something for the pot tonight. ")
            if (DiceRoll("1d3") > 2) {
              msg ("You feel large and rough brush your leg; you turn and yelp a mouthful of bubbles to find yourself face to face with a large bull shark. A reflexive stab with your dagger sends the interested shark scurrying back to deep water. You watch it disappear into the murky blue fifty yards off before continuing to look for food.")
            }
            else {
              player.harvesting = false
              player.hit_points = player.hit_points - 4
              if (player.hit_points < 1) {
                player.hit_points = 1
              }
              msg ("A sudden flash of pain in your calf has you coughing bubbles. You're being lifted off of the sea floor, and then cartwheeling back. Through your alarm, you see a large bull shark shaking your leg.")
              bull_shark_attack
            }
          }
        }
        else if (shark_type = 4) {
          msg ("For a brief second, you are alarmed to see a bulky shark come in from deeper water before realizing it's just a sandbar shark. Sandbar sharks don't attack. Ever. But they are famously curious and this one is no exception, shadowing you closely for nearly half an hour – sometimes so close you could reach out and touch it – before losing interest and swimming away.")
        }
        else if (shark_type <= 13) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            player.wisdom = player.wisdom + 1
            if (DiceRoll("1d8") > 1) {
              msg ("You're cheerfully probing sea anemones with the flat of your dagger, watching them pull into themselves reflexively, when you catch sight of a copper shark out of the corner of your eye. It swims in from deep water, moving fast, as copper sharks do. It watches you for a few seconds before leaving the area, though the encounter keeps you looking over your shoulder for several minutes.")
            }
            else {
              player.harvesting = false
              msg ("You're cheerfully probing sea anemones with the flat of your dagger, watching them pull into themselves reflexively, when you catch sight of a copper shark out of the corner of your eye. It swims in from deep water, moving fast. Most sharks swim fast only when they're attacking, but copper sharks are always in a hurry, so it's difficult to know when they mean business; however, this one graciously clarifies its intent by wheeling around and charging hungrily.")
              copper_shark_attack
            }
          }
          else {
            if (DiceRoll("1d8") > 2) {
              msg ("You're cheerfully probing sea anemones with the flat of your dagger, watching them pull into themselves reflexively when you feel something urgently nosing your hand. You drop the shellfish you're holding just in time for the copper shark to engage in some exploratory biting of your finds. You leave the area while he fusses over them. A lovely seafood dinner isn't worth a shark bite over, not even a little one.")
            }
            else {
              player.harvesting = false
              player.hit_points = player.hit_points - 4
              if (player.hit_points < 1) {
                player.hit_points = 1
              }
              msg ("You're cheerfully probing sea anemones with the flat of your dagger, watching them pull into themselves reflexively when you become aware that your leg is moving from side to side very rapidly with no input from you. You look around and discover that this is due to the fact that a large copper shark is shaking it.")
              copper_shark_attack
            }
          }
        }
        else if (shark_type <= 22) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            msg ("You're engrossed in sifting through the sand, but you don't miss the large shadow approaching from deeper water. Your hopes that it's just a dolphin are dashed when you see the distinct brow of a hammerhead shark come into view.")
            player.wisdom = player.wisdom + 1
            if (DiceRoll("1d6") > 1) {
              msg ("You stay calm and put your back up against a rock, watching the shark watch you. The hammerhead starts making the abrupt turns indicative of an excited shark and for an awful minute you think it's going to attack, but the hammerhead slows back down and eventually leaves the area – though it takes a few more minutes before your pulse returns to normal.")
            }
            else {
              player.harvesting = false
              msg ("You swim back away slowly as the shark closes the distance between you, swimming back and forth in your general direction with purpose. It accelerates and starts making jerky, excited turns as it closes in. You grip your dagger hard enough to break your fingers as you and the hammerhead come together.")
              hammerhead_shark_attack
            }
          }
          else {
            if (DiceRoll("1d6") > 2) {
              msg ("You're engrossed in sifting through the sand when a shadow falls over you; you look up and give a nasty start to see that a hammerhead has made a slow but close pass at you. Renewing your grip on your dagger, you watch the hammerhead; after a minute of stalking behavior, it swims for deeper water.")
            }
            else {
              player.harvesting = false
              player.hit_points = player.hit_points - 4
              if (player.hit_points < 1) {
                player.hit_points = 1
              }
              msg ("You're engrossed in sifting through the sand when an impact from the side rattles your brain in your skull. You look down and see the iconic skull of a hammerhead with its business end buried in your hip.")
              hammerhead_shark_attack
            }
          }
        }
        else if (shark_type <= 31) {
          msg ("A curious blacktip reef shark makes a pass at you from a distance. You've heard of the normally fearful sharks nipping spearfishers to get at their catch, but you're down here for shellfish. You forget about him and don't bothering noticing when he leaves.")
        }
        else {
          msg ("As you go about your business, you notice a sand tiger shark slowly come in and swim over to you. You stay calm, knowing that the snaggletoothed shark looks far more menacing than it is; if you stay calm and don't touch it, it almost certainly won't bother you. Still, you keep any eye on it, and after a minute or so of investigating your activities in the shallows, it carries on swimming around the cove.")
        }
      }
      else {
        enemy_type = DiceRoll("1d10")
        if (enemy_type = 1) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 14) {
            msg ("You're enjoying yourself, in something of a reverie as you begin to reach into a shadowed hollow, but just in time you see an eel glaring at you. Silently praying a word of thanks, you back up off of the agitated eel and continue your search elsewhere.")
            player.wisdom = player.wisdom + 1
          }
          else if ((DiceRoll("1d20")+skill_check(player.dexterity)) >14) {
            msg ("You're enjoying yourself, in something of a reverie, when you make the mistake of reaching into a concave spot you can't completely see. The head of an eel emerges, and you jerk your hand back just in the nick of time. Your heart is racing and the eel is baring its needle-like fangs, but as you're in one piece, you're calling this a win. You back up off of the agitated eel and continue your search elsewhere.")
            player.dexterity = player.dexterity + 1
          }
          else {
            msg ("You're enjoying yourself, in something of a reverie, when you make the mistake of reaching into a concave spot you can't completely see. You almost inhale a lung full of sea water when an eel lashes out and savages your hand. You rush to the surface, spitting up violently and cradling your maimed hand. Not a good day. Still, it could be worse. At least you didn't lose any fingers.")
            player.harvesting = false
            player.bloodied = true
            eel_damage = DiceRoll("1d2")
            player.hit_points = player.hit_points - eel_damage
            msg ("The eel slashed up your hand for " + eel_damage + " points of nonlethal damage.")
            if (player.hit_points <= 0) {
              player.hit_points = 1
            }
          }
        }
        else if (enemy_type = 2) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 14) {
            msg ("While probing through the rocks in the shallows, you notice one of the rocks has fins and long spines. You steer clear of the nasty little fish, grateful you were lucky enough to notice it before you tried to turn it over.")
            player.wisdom = player.wisdom + 1
          }
          else if ((DiceRoll("1d20")+skill_check(player.dexterity)) >14) {
            msg ("While probing through the rocks in the shallows, you feel a cold stab of panic when one of the rocks moves, but you get your hand out of the way before the rockfish's spines can ruin your day. You watch it swim languidly away for a couple of seconds, comtemplating your close call.")
            player.dexterity = player.dexterity + 1
          }
          else {
            msg ("While probing through the rocks in the shallows, you feel a cold stab of panic when one of the rocks moves and nudges your hand. A flare of breathtaking pain tears up your arm as the rockfish makes its getaway. Staggering onto the beach, you laugh and weep, knowing that the sting's bark is worse than its bite.")
            player.harvesting = false
            player.bloodied = true
            if (player.hit_points > 1) {
              player.hit_points = player.hit_points - 1
              msg ("The rockfish jabbed your hand for 1 point of nonlethal damage.")
            }
          }
        }
        else if (enemy_type = 3) {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 9) {
            msg ("As you go back and forth from the surface to the bottom, you fall into a rhythm of kicking off diving down through the surface, kicking off the bottom, dive, kick, dive, kick. With a tasty find in your hand bound for the plate, you wheel around to kick off the bottom again, but at the last moment you spot the sullen eyes of a stingray hidden in the sand. You jerk your legs inward and flapping your arms like a bird, hover away, reminding yourself that thoughtless rhythms are not safe.")
            player.wisdom = player.wisdom + 1
          }
          else if ((DiceRoll("1d20")+skill_check(player.dexterity)) >19) {
            msg ("As you go back and forth from the surface to the bottom, you fall into a rhythm of kicking off diving down through the surface, kicking off the bottom, dive, kick, dive, kick, dive, kick right into a stingray half hidden by the silty sand of the shallows. You and the stingray both thrash around in a panic, but after the dust settles and the ray goes fluttering off, you are pleased to discover a lack of holes in your legs.")
            player.dexterity = player.dexterity + 1
          }
          else {
            msg ("As you go back and forth from the surface to the bottom, you fall into a rhythm of kicking off diving down through the surface, kicking off the bottom, dive, kick, dive, kick, dive, kick right into a stingray half hidden by the silty sand of the shallows. You and the stingray both thrash around in a panic, but in the cloud you're kicking up, you can't see where to go. The barb of the stingray finds the side of your leg, sending you back to the surface and the beach, clutching your leg as the stingray's toxins make your leg cramp up.")
            player.harvesting = false
            player.bloodied = true
            ray_damage = DiceRoll("1d3")
            player.hit_points = player.hit_points - ray_damage
            msg ("The ray gouged your leg for " + ray_damage + " points of nonlethal damage.")
            if (player.hit_points <= 0) {
              player.hit_points = 1
            }
          }
        }
        else {
          if ((DiceRoll("1d20")+skill_check(player.wisdom)) > 19) {
            msg ("You're busy looking for fruits of the sea and, by happy chance, you happen to see a jellyfish floating your way. A two second burst of speed from you and the danger bobs harmlessly by.")
            player.wisdom = player.wisdom + 1
          }
          else {
            msg ("You're busy looking for fruits of the sea when you feel a strong burning sensation in your leg. As they're transparent, it would be hard to blame you for not seeing the approaching jellyfish. Already mad before you even lay eyes on the ghostly little wretch, you wrench it off and kick it away. You swim to the bottom and rub the stingers off of the red welt on your leg with a handful of sand.")
          }
        }
      }
    }
  }
  if (player.harvesting = true) {
    dive_finds = DiceRoll("1d15") + skill_check(player.constitution)
    oysters_found = 0
    mussels_found = 0
    crabs_found = 0
    lobsters_found = 0
    pearls_found = 0
    if (dive_finds < 9) {
      turn_max = 0
    }
    else if (dive_finds < 13) {
      turn_max = 1
      player.constitution = player.constitution + 1
    }
    else if (dive_finds < 15) {
      turn_max = 2
      player.constitution = player.constitution + 1
    }
    else {
      turn_max = 3
      player.constitution = player.constitution + 1
    }
    if (turn_max = 0) {
      msg ("After an hour or so of looking through the rocks, coral, and flora, despite your most sincere efforts, you fail to find anything.")
    }
    else {
      for (1, 1, turn_max, 1) {
        dive_result = DiceRoll("1d100") + skill_check(player.wisdom)
        if (dive_result < 34) {
        }
        else if (dive_result < 54) {
          oysters_found = oysters_found + 1
          larder.oysters = larder.oysters + 3
        }
        else if (dive_result < 74) {
          mussels_found = mussels_found + 1
          larder.mussels = larder.mussels + 3
        }
        else if (dive_result < 87) {
          crabs_found = crabs_found + 1
          larder.crabs = larder.crabs + 1
        }
        else if (dive_result < 100) {
          lobsters_found = lobsters_found + 1
          larder.lobsters = larder.lobsters + 1
        }
        else {
          pearls_found = pearls_found + 1
          collection.pearls = collection.pearls + 1
          player.saltiness = player.saltiness + 1
        }
      }
      // this is my algorithm that assists with handling the print out when you find EXACTLY two kinds of things
      inv_count = 0
      if (oysters_found > 0) {
        inv_count = inv_count + 1
      }
      if (mussels_found > 0) {
        inv_count = inv_count + 1
      }
      if (crabs_found > 0) {
        inv_count = inv_count + 1
      }
      if (lobsters_found > 0) {
        inv_count = inv_count + 1
      }
      if (pearls_found > 0) {
        inv_count = inv_count + 1
      }
      if (inv_count = 0) {
        msg ("After an hour or so of looking through the rocks, coral, and flora, despite your most sincere efforts, you fail to find anything.")
      }
      else {
        player.wisdom = player.wisdom + 1
        OutputTextNoBr ("After an hour or so of looking through the rocks, coral, and flora, you find ")
        if (oysters_found > 0) {
          if (oysters_found = 1) {
            OutputTextNoBr ("1 handful of oysters")
            if ((mussels_found = 0) and (crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
          else {
            OutputTextNoBr (oysters_found + " handfuls of oysters")
            if ((mussels_found = 0) and (crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
        }
        if (mussels_found > 0) {
          if (mussels_found = 1) {
            if ((oysters_found > 0) and ((crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0))) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr ("1 handful of mussels")
            if ((crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
          else {
            if ((oysters_found > 0) and ((crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0))) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr (mussels_found + " handfuls of mussels")
            if ((crabs_found = 0) and (lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
        }
        if (crabs_found > 0) {
          if (crabs_found = 1) {
            if (((oysters_found > 0) or (mussels_found > 0)) and ((lobsters_found = 0) and (pearls_found = 0))) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr ("1 crab")
            if ((lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
          else {
            if (((oysters_found > 0) or (mussels_found > 0)) and ((lobsters_found = 0) and (pearls_found = 0))) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr (crabs_found + " crabs")
            if ((lobsters_found = 0) and (pearls_found = 0)) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
        }
        if (lobsters_found > 0) {
          if (lobsters_found = 1) {
            if (((oysters_found > 0) or (mussels_found > 0) or (crabs_found > 0)) and (pearls_found = 0)) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr ("1 lobster")
            if (pearls_found = 0) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
          else {
            if (((oysters_found > 0) or (mussels_found > 0) or (crabs_found > 0)) and (pearls_found = 0)) {
              OutputTextNoBr (" and ")
            }
            OutputTextNoBr (lobsters_found + " lobsters")
            if (pearls_found = 0) {
              msg (".")
            }
            else {
              if (inv_count <> 2) {
                OutputTextNoBr (", ")
              }
            }
          }
        }
        if (pearls_found > 0) {
          if (pearls_found = 1) {
            if ((oysters_found > 0) or (mussels_found > 0) or (crabs_found > 0) or (lobsters_found > 0)) {
              OutputTextNoBr (" and ")
            }
            msg ("1 pearl.")
          }
          else {
            if ((oysters_found > 0) or (mussels_found > 0) or (crabs_found > 0) or (lobsters_found > 0)) {
              OutputTextNoBr (" and ")
            }
            msg (pearls_found + " pearls.")
          }
        }
      }
    }
  }
}